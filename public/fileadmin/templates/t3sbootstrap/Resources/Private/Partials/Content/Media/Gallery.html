<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
	xmlns:t3sb="http://typo3.org/ns/T3SBS/T3sbootstrap/ViewHelpers" data-namespace-typo3-fluid="true">
<f:comment>Gallery Template</f:comment>
<f:switch expression="{data.CType}">
	<f:case value="t3sbs_card">
		<f:render section="RawRows" arguments="{_all}" />
	</f:case>
	<f:case value="t3sbs_mediaobject">
		<f:render section="RawRows" arguments="{_all}" />
	</f:case>
	<f:defaultCase>
		<f:if condition="{gallery.rows} || {files}">
			<f:comment> In Text right or left</f:comment>
			<f:if condition="{data.imageorient} == 17 || {data.imageorient} == 18 || {data.imageorient} == 66 || {data.imageorient} == 77">
				<f:then>
					<f:if condition="{data.imageorient} == 17 || {data.imageorient} == 18">
						<f:then>
							<div class="gallery text-center float-md-{f:if(condition:'{data.imageorient} == 17',then:'right ml-md-3',else:'left mr-md-3')}{rowwidth}">
								<f:render section="GalleryRows" arguments="{_all}" />
							</div>
						</f:then>
						<f:else>
							<div class="gallery text-center float-md-{f:if(condition:'{data.imageorient} == 17',then:'right ml-md-3',else:'left mr-md-3')}">
								<f:render section="GalleryRows" arguments="{_all}" />
							</div>
						</f:else>
					</f:if>
				</f:then>
				<f:else>
					<f:if condition="{gallery.count.files} == 1">
						<f:then>
							<div class="gallery text-center text-md-{gallery.position.horizontal}"
								 data-ce-columns="{gallery.count.columns}" data-ce-images="{gallery.count.files}">
								<f:render section="RawRows" arguments="{_all}" />
							</div>
						</f:then>
						<f:else>
							<f:comment> Beside Text right or left </f:comment>
							<f:if condition="{gallery.position.noWrap}">
								<f:then>
									<div class="gallery text-center" data-ce-columns="{gallery.count.columns}" data-ce-images="{gallery.count.files}">
										<f:render section="GalleryRows" arguments="{_all}" />
									</div>
								</f:then>
								<f:else>
									<f:comment> Above or below the Text </f:comment>
									<div class="gallery text-center text-md-{gallery.position.horizontal}"
										 data-ce-columns="{gallery.count.columns}" data-ce-images="{gallery.count.files}">
										<f:render section="GalleryRows" arguments="{_all}" />
									</div>
								</f:else>
							</f:if>
						</f:else>
					</f:if>
				</f:else>
			</f:if>
		</f:if>
	</f:defaultCase>
</f:switch>
</html>


<f:section name="GalleryRows">
<f:if condition="{data.imagecols} == 88 && {gallery.count.files} > 1">
	<f:then>
		<f:render section="Carousel" arguments="{_all}" />
	</f:then>
	<f:else>
		<f:for each="{gallery.rows}" as="row">
			<f:if condition="{gallery.position.noWrap} || {gallery.position.vertical} == 'intext'">
				<f:then>
					<div class="row">
				</f:then>
				<f:else>
					<f:comment> Above or below the Text </f:comment>
					<div class="row{f:if(condition: '{gallery.position.horizontal} == \'center\'', then: ' mx-auto')}{rowwidth}">
				</f:else>
			</f:if>
			<f:for each="{row.columns}" as="column" iteration="iterator">
				<f:if condition="{column.media}">
					<div class="col-sm{f:if(condition: iterator.isFirst, then: ' first-figure')}{f:if(condition: iterator.isLast, then: ' last-figure')}">
						<f:render partial="Media/Type" arguments="{
							file: column.media,
							dimensions: column.dimensions,
							addmedia: addmedia}" />
					</div>
				</f:if>
			</f:for>
			</div>
		</f:for>
	</f:else>
</f:if>
</f:section>


<f:section name="RawRows">
<f:if condition="{data.imagecols} == 88 && {gallery.count.files} > 1">
	<f:then>
		<f:render section="Carousel" arguments="{_all}" />
	</f:then>
	<f:else>
		<f:for each="{gallery.rows}" as="row" iteration="iterator">
			<f:for each="{row.columns}" as="column">
				<f:if condition="{column.media}">
					<f:render partial="Media/Type" arguments="{
						file: column.media,
						dimensions: column.dimensions,
						addmedia: addmedia}" />
				</f:if>
			</f:for>
		</f:for>
	</f:else>
</f:if>
</f:section>


<f:section name="Carousel">
<div id="carousel-{data.uid}" class="carousel slide" data-ride="carousel">
	<ol class="carousel-indicators">
		<f:for each="{files}" as="mediaElement" iteration="iterator">
			<li data-target="#carousel-{data.uid}" data-slide-to="{iterator.index}" class="{f:if(condition:'{iterator.isFirst} == 1',then:'active')}"></li>
		</f:for>
	</ol>
	<div class="carousel-inner">
		<f:for each="{files}" as="media" iteration="iterator">
			<div class="carousel-item{f:if(condition:'{iterator.isFirst} == 1',then:' active')}">
				<f:render section="Slide" arguments="{file: media, dimensions: gallery}" />
				<f:if condition="{media.title} || {media.description}">
					<div class="carousel-caption d-none d-md-block">			
						<f:if condition="{media.title}">
							<h5>{media.title -> f:format.html()}</h5>
						</f:if>
						<f:if condition="{media.description}">
							<p>{media.description -> f:format.html()}</p>
						</f:if>
					</div>
				</f:if>
			</div>
		</f:for>
	</div>
	<a class="carousel-control-prev" href="#carousel-{data.uid}" role="button" data-slide="prev">
		<span class="carousel-control-prev-icon" aria-hidden="true"></span>
		<span class="sr-only">zur√ºck</span>
	</a>
	<a class="carousel-control-next" href="#carousel-{data.uid}" role="button" data-slide="next">
		<span class="carousel-control-next-icon" aria-hidden="true"></span>
		<span class="sr-only">weiter</span>
	</a>
</div>
</f:section>

<f:section name="Slide">
<f:link.typolink parameter="{file.properties.link}" title="{file.properties.title}">
	<t3sb:media file="{file}" title="{file.title}" alt="{f:if(condition: file.alternative, then: '{file.alternative}', else: 'image-{file.uid}')}"
	 class="img-fluid{f:if(condition: file.properties.tx_t3sbootstrap_extra_imgclass, then: ' {file.properties.tx_t3sbootstrap_extra_imgclass}')}"
	  width="{dimensions.width}" height="auto" breakpoints="{
		0: {'cropVariant': 'default', 'media': '(min-width: 1200px)', 'srcset': '{settings.srcsetDesktop}'},
		1: {'cropVariant': 'tablet', 'media': '(min-width: 576px)', 'srcset': '{settings.srcsetTablet}'},
		2: {'cropVariant': 'mobile', 'media': '(max-width: 575px)', 'srcset': '{settings.srcsetMobile}'}
	}" picturefill="{settings.picturefill}" lazyload="0" />
</f:link.typolink>
</f:section>
